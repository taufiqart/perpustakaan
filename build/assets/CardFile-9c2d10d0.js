import{j as e,r as l,q as L,W as O,a}from"./app-7e599d37.js";import{B as j,A as m}from"./BookLoader-453e618d.js";import{D as x,M as D,S,a as P}from"./SecondaryButton-6200ff6a.js";import{I as W,T as q,a as z}from"./TextInput-dd9b3fda.js";import{P as H}from"./PrimaryButton-064c815d.js";function G({children:o,className:u=""}){return e("div",{className:`fixed bottom-[10%]  w-full z-50 left-0 flex justify-center items-center ${u}`,children:e("div",{className:"bg-white px-4 py-1 rounded-full shadow-md",children:o})})}function Y({file:o}){l.useRef();const u=L().props;l.useState(!1);const[y,c]=l.useState(),{data:b,setData:f,put:F,delete:T,processing:s,errors:R,clearErrors:v,reset:w}=O(),[E,N]=l.useState(!1),[$,C]=l.useState(!1),[t,g]=l.useState(),p=()=>{N(!1),g(),w(),v()},B=()=>{N(!0)},h=()=>{C(!1),g(),w(),v()},M=()=>{C(!0)};l.useEffect(()=>{g(u.flash)},[s]);const I=n=>{n.preventDefault(),T(route("file.delete"),{onSuccess:()=>setTimeout(()=>p(),[1e3])})},A=n=>{n.preventDefault(),console.log(b),F(route("file.rename"),{onSuccess:()=>setTimeout(()=>h(),[1e3])}),console.log(t)},k=async(n="link",i)=>{let d="";if(n=="link"?d=window.location.origin+i.path:n=="code"&&(d=`<object data="${window.location.origin+i.path}">
            <object data="https://docs.google.com/viewer?url=${window.location.origin+i.path}&embedded=true" height="1000" width="100%">
            <a href="${window.location.origin+i.path}" download="${i.filename}">Download document ${i.filename}</a> 
            </object>
            </object>`),d!="")try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(d);else{const r=document.createElement("textarea");r.value=d,r.style.position="absolute",r.style.left="-99999999px",document.body.prepend(r),r.select();try{document.execCommand("copy"),c("Copied")}catch{c("Failed to Copy")}finally{setTimeout(()=>{c(null)},[1e3]),r.remove()}}}catch{c("Failed to Copy")}finally{setTimeout(()=>{c(null)},[1e3])}};return a("div",{className:"relative flex flex-col items-center group",children:[e("div",{className:"overflow-hidden  text-center break-words ",children:e("div",{className:"w-20 md:w-32 h-20 md:h-32 overflow-hidden flex justify-center items-center",children:o.type=="image"?e("img",{src:o.path,alt:o.filename,className:"w-full h-full object-contain"}):o.type=="video"?e("video",{src:o.path}):o.type=="audio"?e("i",{className:"fas fa-headphones text-7xl text-center"}):e("i",{className:"fas fa-file text-7xl text-center"})})}),a("div",{className:"flex overflow-clip mt-2  ",children:[e("h1",{className:"text-xs md:text-sm w-20 md:w-32 break-words text-center",children:o.filename}),a(x,{children:[e(x.Trigger,{children:e("button",{type:"button",className:" hidden group-hover:inline-flex hover:bg-white rounded-full items-center w-7 justify-center h-7 border border-transparent text-sm font-medium  text-gray-500  hover:text-gray-700 focus:outline-none transition ease-in-out duration-150",children:e("i",{className:"fas fa-ellipsis-v"})})}),a(x.Content,{children:[a("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>{k("link",o)},children:[e("i",{className:"fas fa-link"})," Link"]}),a("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>{k("code",o)},children:[e("i",{className:"fas fa-code"})," Embed"]}),a("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>{f(o),M()},children:[e("i",{className:"fas fa-edit"})," Rename"]}),a("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>{f(o),B()},children:[e("i",{className:"fas fa-trash"})," Hapus"]})]})]})]}),a(D,{show:$,onClose:h,children:[e(j,{loader:s}),a("form",{className:"p-6  ",onSubmit:A,children:[!s&&(t==null?void 0:t.error)&&e(m,{type:"error",message:t==null?void 0:t.error}),!s&&(t==null?void 0:t.success)&&e(m,{type:"success",message:t==null?void 0:t.success}),a("div",{className:"mt-3",children:[e(W,{htmlFor:"filename",value:"filename"}),e(q,{id:"filename",type:"text",name:"filename",value:b.filename||"",onChange:n=>f("filename",n.target.value),className:"mt-1 block w-full ",placeholder:"filename"}),e(z,{message:R.slug,className:"mt-2"})]}),a("div",{className:"mt-6 flex justify-end",children:[e(S,{onClick:h,children:"Cancel"}),e(H,{className:"ml-3 bg-blue-400 hover:bg-blue-600 focus:bg-blue-600",disabled:s,as:"button",children:"Rename"})]})]})]}),a(D,{show:E,onClose:p,maxWidth:"sm",children:[e(j,{loader:s}),a("form",{className:"p-6 w-full h-full",onSubmit:I,children:[!s&&(t==null?void 0:t.error)&&e(m,{type:"error",message:t==null?void 0:t.error}),!s&&(t==null?void 0:t.success)&&e(m,{type:"success",message:t==null?void 0:t.success}),e("h2",{className:"text-lg font-medium text-gray-500",children:"Are you sure you want to delete?"}),e("h2",{className:"text-lg font-medium text-gray-900",children:o.filename}),a("div",{className:"mt-6 flex justify-end",children:[e(S,{onClick:p,children:"Cancel"}),e(P,{className:"ml-3",disabled:s,as:"button",children:"Delete"})]})]})]}),y&&e(G,{className:"left-0 md:left-64 md:w-[calc(100%-16rem)]",children:e("h1",{className:"text-slate-600 text-md md:text-lg",children:y})})]})}export{Y as default};
