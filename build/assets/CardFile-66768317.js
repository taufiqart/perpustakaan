import{r as n,q as A,W as L,a,j as e}from"./app-5d91f995.js";import{B as w,A as i}from"./BookLoader-b3c3f800.js";import{D as f,M as N,S as k,a as O}from"./SecondaryButton-2580653c.js";import{I as P,T as W,a as q,P as H}from"./TextInput-e8faeac4.js";function Q({file:s}){n.useRef();const C=A().props;n.useState(!1);const{data:g,setData:c,put:D,delete:F,processing:o,errors:S,clearErrors:h,reset:x}=L(),[j,p]=n.useState(!1),[R,y]=n.useState(!1),[t,m]=n.useState(),d=()=>{p(!1),m(),x(),h()},T=()=>{p(!0)},u=()=>{y(!1),m(),x(),h()},B=()=>{y(!0)};n.useEffect(()=>{m(C.flash)},[o]);const E=r=>{r.preventDefault(),F(route("file.delete"),{onSuccess:()=>setTimeout(()=>d(),[1e3])})},I=r=>{r.preventDefault(),console.log(g),D(route("file.rename"),{onSuccess:()=>setTimeout(()=>u(),[1e3])}),console.log(t)},b=async(r="link",v)=>{let l="";if(r=="link"?l=window.location.origin+v.path:r=="code"&&(l='<embed src="'+window.location.origin+v.path+'" height="500" width="100%"></embed>'),l!="")try{await navigator.clipboard.writeText(l)}catch(M){alert("Failed to copy: ",M)}};return a("div",{className:"relative flex flex-col items-center group",children:[e("div",{className:"overflow-hidden  text-center break-words ",children:e("div",{className:"w-20 md:w-32 h-20 md:h-32 overflow-hidden flex justify-center items-center",children:s.type=="image"?e("img",{src:s.path,alt:s.filename,className:"w-full h-full object-contain"}):s.type=="video"?e("video",{src:s.path}):s.type=="audio"?e("i",{className:"fas fa-headphones text-7xl text-center"}):e("i",{className:"fas fa-file text-7xl text-center"})})}),a("div",{className:"flex overflow-clip mt-2  ",children:[e("h1",{className:"text-xs md:text-sm w-20 md:w-32 break-words text-center",children:s.filename}),a(f,{children:[e(f.Trigger,{children:e("button",{type:"button",className:" hidden group-hover:inline-flex hover:bg-white rounded-full items-center w-7 justify-center h-7 border border-transparent text-sm font-medium  text-gray-500  hover:text-gray-700 focus:outline-none transition ease-in-out duration-150",children:e("i",{className:"fas fa-ellipsis-v"})})}),a(f.Content,{children:[a("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>{b("link",s)},children:[e("i",{className:"fas fa-link"})," Link"]}),a("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>{b("code",s)},children:[e("i",{className:"fas fa-code"})," Embed"]}),a("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>{c(s),B()},children:[e("i",{className:"fas fa-edit"})," Rename"]}),a("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>{c(s),T()},children:[e("i",{className:"fas fa-trash"})," Hapus"]})]})]})]}),a(N,{show:R,onClose:u,children:[e(w,{loader:o}),a("form",{className:"p-6  ",onSubmit:I,children:[!o&&(t==null?void 0:t.error)&&e(i,{type:"error",message:t==null?void 0:t.error}),!o&&(t==null?void 0:t.success)&&e(i,{type:"success",message:t==null?void 0:t.success}),a("div",{className:"mt-3",children:[e(P,{htmlFor:"filename",value:"filename"}),e(W,{id:"filename",type:"text",name:"filename",value:g.filename||"",onChange:r=>c("filename",r.target.value),className:"mt-1 block w-full ",placeholder:"filename"}),e(q,{message:S.slug,className:"mt-2"})]}),a("div",{className:"mt-6 flex justify-end",children:[e(k,{onClick:u,children:"Cancel"}),e(H,{className:"ml-3 bg-blue-400 hover:bg-blue-600 focus:bg-blue-600",disabled:o,as:"button",children:"Rename"})]})]})]}),a(N,{show:j,onClose:d,maxWidth:"sm",children:[e(w,{loader:o}),a("form",{className:"p-6 w-full h-full",onSubmit:E,children:[!o&&(t==null?void 0:t.error)&&e(i,{type:"error",message:t==null?void 0:t.error}),!o&&(t==null?void 0:t.success)&&e(i,{type:"success",message:t==null?void 0:t.success}),e("h2",{className:"text-lg font-medium text-gray-500",children:"Are you sure you want to delete?"}),e("h2",{className:"text-lg font-medium text-gray-900",children:s.filename}),a("div",{className:"mt-6 flex justify-end",children:[e(k,{onClick:d,children:"Cancel"}),e(O,{className:"ml-3",disabled:o,as:"button",children:"Delete"})]})]})]})]})}export{Q as default};
