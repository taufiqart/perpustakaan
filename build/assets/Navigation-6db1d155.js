import{j as e,F as W,a as r,r as p,W as q,q as H}from"./app-7e599d37.js";import{A as V}from"./AdminLayout-fa351ba1.js";import{D as v,M as A,S as F,a as $}from"./SecondaryButton-6200ff6a.js";import{I as y,T as j,a as N}from"./TextInput-dd9b3fda.js";import{c as z}from"./function-da0548c6.js";import{P as T}from"./PrimaryButton-064c815d.js";import{B as _,A as f}from"./BookLoader-453e618d.js";function B({category:n,className:h,index:x,length:w,onAdd:c,onDelete:t,setDataAdd:i,child:u}){const g=s=>{var a;i({parent_id:s.id,order:((a=s.child)==null?void 0:a.length)+1}),c()},d=s=>{i(s),t()},m=s=>{i({...s,edit:!0}),c()};return e(W,{children:r("div",{className:` w-full h-10 bg-white hover:bg-slate-100 shadow-md group rounded-sm flex justify-between items-center px-3 ${h}`,children:[n.title,r("div",{className:"flex gap-x-5",children:[e("div",{className:"flex opacity-0 group-hover:opacity-100 justify-center items-center",children:!u&&e("button",{type:"button",onClick:()=>g(n),className:"inline-flex hover:bg-white rounded-full items-center w-7 justify-center h-7 border border-transparent text-sm font-medium  text-gray-500  hover:text-gray-700 focus:outline-none transition ease-in-out duration-150",children:e("i",{className:"fas fa-plus"})})}),r(v,{children:[e(v.Trigger,{children:e("span",{className:"inline-flex rounded-md",children:e("button",{type:"button",className:"inline-flex hover:bg-white rounded-full items-center w-7 justify-center h-7 border border-transparent text-sm font-medium  text-gray-500  hover:text-gray-700 focus:outline-none transition ease-in-out duration-150",children:e("i",{className:"fas fa-ellipsis-v"})})})}),r(v.Content,{children:[r("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>m(n),children:[e("i",{className:"fas fa-edit"})," Edit"]}),r("div",{className:"block w-full px-4 py-2 text-left text-sm leading-5 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out !text-gray-500 hover:!text-gray-700",onClick:()=>d(n),children:[e("i",{className:"fas fa-trash"})," Hapus"]})]})]})]})]})})}function Y({categories:n}){var S;const[h,x]=p.useState(!1),[w,c]=p.useState(!1),[t,i]=p.useState(),u=()=>{x(!1),i(),C(),D()},g=()=>{x(!0)},d=()=>{c(!1),i(),C(),D()},m=()=>{c(!0)},{data:s,setData:a,errors:b,processing:o,post:E,put:I,delete:M,reset:C,clearErrors:D}=q({title:"",slug:""}),P=H().props;p.useEffect(()=>{i(P.flash)},[o]);const L=l=>{l.preventDefault(),s!=null&&s.edit?I(route("navigation.update",s.id),{onSuccess:()=>setTimeout(()=>d(),[1e3])}):E(route("navigation.store"),{onSuccess:()=>setTimeout(()=>d(),[1e3])})},O=l=>{l.preventDefault(),M(route("navigation.destroy",s.id),{onSuccess:()=>setTimeout(()=>u(),[1e3])})};return r(V,{children:[e("div",{className:"w-full flex gap-x-3 p-4 pt-0 pl-0 -mt-5",children:r(T,{onClick:()=>{a({...s,create:!0,order:n.length}),m()},className:"inline-flex items-center px-4 py-2 bg-blue-400 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-600 focus:bg-blue-600 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e("i",{className:"fas fa-plus"}),"Add"]})}),e("div",{className:"flex flex-col gap-y-1",children:n&&n.map(l=>r("div",{className:"w-full max-w-lg flex flex-col gap-y-1 relative",children:[e(B,{onAdd:m,onDelete:g,setDataAdd:a,category:l},l),l.child.length>0&&l.child.map(k=>e(B,{category:k,child:!0,onAdd:m,onDelete:g,setDataAdd:a,className:"pl-10"},k.slug))]},l.slug))}),r(A,{show:w,onClose:d,children:[e(_,{loader:o}),r("form",{className:"p-6  ",onSubmit:L,children:[!o&&(t==null?void 0:t.error)&&e(f,{type:"error",message:t==null?void 0:t.error}),!o&&(t==null?void 0:t.success)&&e(f,{type:"success",message:t==null?void 0:t.success}),r("div",{className:"mt-3",children:[e(y,{htmlFor:"title",value:"Title"}),e(j,{id:"title",type:"text",name:"title",value:s.title||"",onChange:l=>{a({...s,title:l.target.value,slug:z(l.target.value!=null?l.target.value:"")})},className:"mt-1 block w-full",placeholder:"title"}),e(N,{message:b.title,className:"mt-2"})]}),r("div",{className:"mt-3",children:[e(y,{htmlFor:"slug",value:"Slug"}),e(j,{id:"slug",type:"text",name:"slug",value:s.slug||"",onChange:l=>a("slug",l.target.value),className:"mt-1 block w-full ",placeholder:"slug"}),e(N,{message:b.slug,className:"mt-2"})]}),((S=s==null?void 0:s.child)==null?void 0:S.length)>0||s!=null&&s.create?e("div",{className:""}):r("div",{className:"mt-3",children:[e(y,{htmlFor:"parent_id",value:"Parent"}),r("select",{id:"parent_id",type:"text",name:"parent_id",defaultValue:s.parent_id,onChange:l=>a("parent_id",l.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm ",placeholder:"parent",children:[e("option",{value:"",children:"Parent"}),n.map(l=>e("option",{value:l.id,children:l.title},l.id))]}),e(N,{message:b.parent_id,className:"mt-2"})]}),r("div",{className:"mt-6 flex justify-end",children:[e(F,{onClick:d,children:"Cancel"}),e(T,{className:"ml-3 bg-blue-400 hover:bg-blue-600 focus:bg-blue-600",disabled:o,as:"button",children:"Submit"})]})]})]}),r(A,{show:h,onClose:u,maxWidth:"sm",children:[e(_,{loader:o}),r("form",{className:"p-6 w-full h-full",onSubmit:O,children:[!o&&(t==null?void 0:t.error)&&e(f,{type:"error",message:t==null?void 0:t.error}),!o&&(t==null?void 0:t.success)&&e(f,{type:"success",message:t==null?void 0:t.success}),e("h2",{className:"text-lg font-medium text-gray-500",children:"Are you sure you want to delete?"}),e("h2",{className:"text-lg font-medium text-gray-900",children:s.title}),r("div",{className:"mt-6 flex justify-end",children:[e(F,{onClick:u,children:"Cancel"}),e($,{className:"ml-3",disabled:o,as:"button",children:"Delete"})]})]})]})]})}export{Y as default};
